# Группы: текущее поведение и расширяемость

## Текущая версия

- **Все пользователи**, авторизующиеся через Telegram (с hash), попадают в **одну дефолтную группу «Семья»** (Firestore: документ с id `default-family`). Это задаётся в Cloud Function `getTelegramCustomToken`.
- Первый вошедший пользователь создаёт группу и становится `admin`, остальные добавляются в неё как `member`.
- Fallback-вход (без hash, офлайн/тест): создаётся локальная группа «Семья» на устройстве; в продакшене ожидается вход через Telegram.

## Подготовка к будущим версиям (своя группа и приглашения)

Архитектура уже не мешает добавить:

- **Создание своей группы при входе** — есть `createGroupInFirestore`, модель `Group` с `members`, `User.currentGroupId`.
- **Переключение группы** — есть `switchGroup(groupId)` в AuthContext и сохранение текущей группы у пользователя.
- **Приглашение в группу** — есть `joinGroupInFirestore(groupId, userId, role)`; группа хранит подколлекцию `members` с ролями.

Что понадобится в будущем (не реализовано сейчас):

- Выбор при первом входе: «Создать свою группу» / «Войти в группу по приглашению» (код/ссылка).
- API или Cloud Function для создания группы, генерации инвайт-кода/ссылки и присоединения по нему.
- В UI — экран «Мои группы» и переключение между группами (подписка на `user.currentGroupId` и `switchGroup` уже есть).

Типы в `src/types/index.ts`: `User.currentGroupId`, `Group`, `GroupMember` — менять не требуется.
